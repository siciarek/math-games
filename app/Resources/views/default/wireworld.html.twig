{% extends 'board.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link href="css/wireworld.css" rel="stylesheet"/>

    <style>
        #board span {
            width: 2px;
            height: 2px;
            border: none !important
        };
    </style>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="js/wireworld.js"></script>
    <script src="js/wireworld-digit-board.js"></script>
    <script src="js/wireworld-digit-alt-board.js"></script>
    <script>
        var speed = 200;
        var app = null;
        var board = null;

        var height = 34 * 2;
        var width = 64 * 2;

        var pattern = location.href.replace(/^.*?(\d+).*?$/, '$1');
        pattern = isNaN(pattern) ? 0 : parseInt(pattern);
        var digit = 0;

        if(pattern === 3) {
            var temp = location.href.replace(/^.*?\?(.*)$/, '$1').split(',');
            if(temp.length > 1) {
                digit = isNaN(temp[1]) ? 0 : parseInt(temp[1]);
            }

            width = wireworldDigitBoard[0].length;
            height = wireworldDigitBoard.length;
            wireworldDigitBoard[272][37 + digit * 6] = 1;
            wireworldDigitBoard[273][37 + digit * 6] = 3;
            wireworldDigitBoard[273][37 + digit * 6 + 1] = 2;
        }

        if(pattern === 4) {
            temp = location.href.replace(/^.*?\?(.*)$/, '$1').split(',');
            if(temp.length > 1) {
                digit = isNaN(temp[1]) ? 0 : parseInt(temp[1]);
            }

            width = wireworldDigitAltBoard[0].length;
            height = wireworldDigitAltBoard.length;
            wireworldDigitAltBoard[186][48] = 1;
            wireworldDigitAltBoard[187][48] = 2;
            wireworldDigitAltBoard[185][45] = 1;
            wireworldDigitAltBoard[184][45] = 2;

//            wireworldDigitAltBoard[204][109] = 1;
//            wireworldDigitAltBoard[204][110] = 3;
//            wireworldDigitAltBoard[205][110] = 2;
//
//            wireworldDigitAltBoard[202][109] = 1;
//            wireworldDigitAltBoard[202][110] = 3;
//            wireworldDigitAltBoard[201][110] = 2;
        }


        $(document).ready(function () {

            board = new Board(height, width);

            if (pattern === 3) {
                width = 128;
                height = 280;
            }

            app = new Wireworld(board, pattern);

            run(app, speed);
        });
    </script>
{% endblock %}
