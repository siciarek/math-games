{% extends 'board.html.twig' %}

{% block javascripts %}
    {{ parent() }}
    <script src="/js/game-of-life-patterns.js"></script>
    <script src="/js/game-of-life.js"></script>
    <script>
        var speed = 150;
        var app = null;
        var board = null;
        var index = location.href.replace(/^.*?(\d+).*?$/, '$1');
        index = isNaN(index) ? 0 : parseInt(index);

        $(document).ready(function () {
            board = new Board();

            var names = {
                'B3/S1234': 'Maze',
                'B37/S1234': 'Maze full of mice',
                'B3/S12345': 'Mazectric'
            };

            var rulestrings = [];

            for(var name in names) {
                rulestrings.push(name);
            }

            app = new GameOfLife(board, rulestrings[index]);
            app.pause = false;
            app.name = names[app.rulestring] + ' (' + app.rulestring + ')';

            app.fetchPattern = function () {
                this.pattern = 107;
                var pat = this.definitions[this.patterns[this.pattern]];
                pat.name = 'base: ' + pat.name;
                pat.type = 'p200';
                pat.description = '';
                return pat;
            };

            app.init();

            run(app, speed);
        });
    </script>
{% endblock %}